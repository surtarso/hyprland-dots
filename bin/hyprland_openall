#!/bin/bash
# ----------------- hyprland_openall -------------------
# Opens a predefined set of windows on their respective
# monitors/workspaces in Hyprland.
# Requires: jq, hyprctl
# Bind example: bind = $mod, backspace, exec, $HOME/bin/hyprland_openall
# --------------------------------------------------------
# Tarso Galv√£o - Mon Oct 20 2025

# === CONFIG ===
# Format: "command|workspace|monitor"
# Monitor can be name or ID as shown in `hyprctl monitors`
APPS_LIST=(
    "kitty --title clock-rs -o font_size=18 -o background_opacity=0.0 -e --class clock-rs clock-rs -c bright-blue|1|DVI-D-1"
    "kitty --title rmpc -e --class mpd-player rmpc|2|HDMI-A-3"
    "brave --app="https://bsky.app"|2|HDMI-A-3"
    "brave --app="http://dash.server.lan"|3|HDMI-A-1"
    "brave --app="https://web.whatsapp.com"|4|DP-1"
    "ghostty --class=com.mitchellh.ghostty-floating|4|DP-1"
)

# Main loop (timming is critical, too fast wont work)
for APP in "${APPS_LIST[@]}"; do
    IFS="|" read -r CMD WS MON <<< "$APP"
    hyprctl dispatch focusmonitor "$MON"
    hyprctl dispatch workspace "$WS"
    sleep 0.2
    eval "$CMD" & disown
    sleep 0.6
done

# End focus/pointer in preferred workspace monitor
hyprctl dispatch focusmonitor HDMI-A-1
hyprctl dispatch workspace 3

notify-send "Hyprland OpenAll" "Launched all configured apps."
echo "All configured apps have been launched."
